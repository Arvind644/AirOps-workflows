{"definition":[{"name":"step_11","type":"llm","disabled":false,"annotations":{"friendly_name":"Analyze Pain Points","note":""},"config":{"canEnable":true,"note":"","model":"claude-3-7-sonnet-latest","soft_fail":false,"config":{"budget_tokens":8000,"formatting_re_enabled":false,"include_citations":false,"json_schema":{"schema":{"type":"object","properties":{"":{"type":"string"}},"required":[""],"additionalProperties":false},"strict":true,"name":"response"},"max_tokens":null,"models_source":"airops","reasoning_effort":"medium","request_consistent_results":false,"response_format":null,"stream":true,"temperature":0.3,"thinking_enabled":false,"web_research":false,"messages":[{"role":"system","content":"You are an expert at analyzing sales conversations and identifying deep customer pain points that can be used for compelling ad copy. Your goal is to focus on emotional triggers and urgent needs that would make someone extremely excited about a solution. Your analysis should be thorough, precise, and insightful, capturing the essence of the customer's needs and emotions.","id":"43c0384b-da5d-4aea-8fe7-d002ff5535fd","images":[""]},{"id":0,"role":"user","content":"Analyze the following sales call transcripts and extract the following information with precision and clarity:\n\n1. **Compelling Pain Points:** Identify the most pressing issues that prospects are facing, which make them desperate for a solution. For each pain point, provide:\n   - **Pain Point:** A clear and concise description of the issue, using the prospect's own words where possible.\n   - **Emotional Impact:** Describe the emotional response or urgency expressed by the prospect, using adjectives that capture the intensity of their feelings.\n   - **Frequency:** Indicate how often this pain point appears across the transcripts, using a numerical count.\n\n2. **Resonating Phrases:** Extract specific phrases or words that resonated strongly with prospects. These should be expressions that elicited a positive or strong emotional response. Provide context for why these phrases were impactful.\n\n3. **Key Objections:** Identify common objections raised by prospects. These are concerns or hesitations that need to be addressed in advertising to reassure potential customers. Provide a brief explanation of each objection.\n\n4. **Exciting Value Propositions:** Highlight unique value propositions that excited prospects the most. These should be aspects of the product or service that generated enthusiasm or interest. Explain why these value propositions were compelling.\n\nFormat the output as JSON with the following structure:\n{\n  \"compelling_pain_points\": [\n    {\n      \"pain_point\": \"string\",\n      \"emotional_impact\": \"string\",\n      \"frequency\": \"number\"\n    }\n  ],\n  \"resonating_phrases\": [\"string\"],\n  \"key_objections\": [\"string\"],\n  \"exciting_value_props\": [\"string\"]\n}\n\nEnsure that your analysis is detailed and captures the nuances of the conversations. Use a professional and empathetic tone throughout your analysis.\n\nSales Transcripts:\n{{ sales_transcripts }}","images":[""]}],"canEnable":true}}},{"name":"step_2","type":"web_scrape","disabled":false,"annotations":{"friendly_name":"Web Page Scrape","note":""},"config":{"canEnable":true,"auto_scroll":false,"hard_fail":true,"optimize_for":"speed","output_type":"markdown","proxy_type":"datacenter","remove_boilerplate":true,"render_js":false,"soft_fail":false,"url":"{{ company_url }}"}},{"name":"step_20","type":"deep_research","disabled":false,"annotations":{"friendly_name":"Perplexity Deep Research","note":""},"config":{"canEnable":true,"note":"","type":"deep_research","soft_fail":false,"model":"sonar-deep-research","models_source":"airops","config":{"include_citations":true,"json_schema":{"schema":{"type":"object","properties":{"":{"type":"string"}},"required":[""],"additionalProperties":false},"strict":true,"name":"response"},"max_tokens":64000,"messages":[{"content":"I'm creating a LinkedIn ad and I would love for you to research more about the company so I can improve my copy. Can you research {{ company_url }} and find out more about it, its competitors, customer sentiment, opportunity gaps, and what potential angles an ad could take to really succeed based on the market and industry pain points that the company can solve. ","images":[""],"role":"user","id":"first-message"}],"request_consistent_results":false,"response_format":"text","return_images":false,"return_related_questions":false,"stream":false,"temperature":0,"web_research":true}}},{"name":"step_4","type":"llm","disabled":false,"annotations":{"friendly_name":"Prompt LLM","note":""},"config":{"canEnable":true,"note":"","model":"claude-3-7-sonnet-latest","soft_fail":false,"config":{"budget_tokens":8000,"formatting_re_enabled":false,"include_citations":false,"json_schema":{"schema":{"type":"object","properties":{"":{"type":"string"}},"required":[""],"additionalProperties":false},"strict":true,"name":"response"},"max_tokens":null,"models_source":"airops","reasoning_effort":"medium","request_consistent_results":false,"response_format":null,"stream":false,"temperature":0.7,"thinking_enabled":false,"web_research":false,"messages":[{"role":"system","content":"","id":"2d68af73-5a5c-4a5f-93ea-df2e20976c75","images":[""]},{"id":"first-message","content":"Take {{ step_2.output }} and ouput 1 search term people would use to find the product. Keep it broad enough so if I search it, I'll also find competitors. Just the term itself, nothing else. ","images":[""],"role":"user"},{"id":"second-message","content":"","images":[""],"role":"assistant"}],"canEnable":true}}},{"name":"step_1","type":"google_search","disabled":false,"annotations":{"friendly_name":"Google Search","note":""},"config":{"canEnable":true,"note":"","query":"{{ step_4.output }}","result_type":"all","search_params":"{\"num\": 1, \"no_cache\": true}\n","soft_fail":false}},{"name":"step_5","type":"system_app","disabled":false,"annotations":{"friendly_name":"Company Enrichment"},"config":{"app_id":27742,"app_version":"","inputs":{"website":"{{ company_url }}"}}},{"name":"step_6","type":"system_app","disabled":false,"annotations":{"friendly_name":"Brandfetch Company Info"},"config":{"app_id":39409,"app_version":"","inputs":{"company_url":"{{ company_url }}"}}},{"name":"step_7","type":"code","disabled":false,"annotations":{"friendly_name":"Process Company Data","note":""},"config":{"canEnable":true,"language":"python","function":"import json\n\ndef get_employee_count(pdl_data):\n    if 'employee_count' in pdl_data:\n        return pdl_data['employee_count']\n    return 0\n\ndef process_company_data():\n    pdl_data = step_5['output']\n    brandfetch_data = step_6['output']\n    \n    # Extract relevant information\n    employee_count = get_employee_count(pdl_data)\n    \n    # Create company profile\n    company_profile = {\n        'name': pdl_data.get('name', ''),\n        'employee_count': employee_count,\n        'industry': pdl_data.get('industry', ''),\n        'linkedin_url': pdl_data.get('linkedin_url', ''),\n        'logo_url': brandfetch_data.get('logo_url', '') if brandfetch_data else None\n    }\n    \n    return company_profile\n\nreturn process_company_data()","lambda_function":"","soft_fail":false}},{"name":"step_8","type":"llm","disabled":false,"annotations":{"friendly_name":"Find Growing AI Companies","note":""},"config":{"canEnable":true,"note":"","model":"gpt-4o-search-preview","soft_fail":false,"config":{"budget_tokens":8000,"formatting_re_enabled":false,"include_citations":false,"json_schema":{"schema":{"type":"object","properties":{"":{"type":"string"}},"required":[""],"additionalProperties":false},"strict":true,"name":"response"},"max_tokens":null,"models_source":"airops","reasoning_effort":"medium","request_consistent_results":false,"response_format":"","stream":true,"temperature":0.7,"thinking_enabled":false,"web_research":false,"messages":[{"role":"system","content":"You are an expert in the B2B AI industry with deep knowledge of growing companies. Your task is to identify fast-growing B2B AI companies based on funding rounds and employee growth. Your responses should be concise, accurate, and formatted in JSON. Maintain a professional and informative tone throughout your analysis.","id":"cb8ad5e7-32a9-4a8a-ab95-a92ca58275fb","images":[""]},{"id":"832eb7dd-bfdd-4ee5-b99a-c1682c23997c","content":"Based on the company profile {{ step_7.output }}, identify 3 competitors. Focus on companies that have had recent funding rounds and significant employee growth.Provide the response in JSON format with the following structure:\n}\n\nFormat the output as JSON with the following structure:\n{\n  \"companies\": [\n    {\n      \"linkedin_identifier\": \"companyname\"\n    }\n  ]\n}\n\nFor example, if identifying DataRobot, the linkedin_identifier should be \"datarobot\" (lowercase, no spaces or special characters).","images":[""],"role":"user"}],"canEnable":true}}},{"name":"step_15","type":"json_formatter","disabled":false,"annotations":{"friendly_name":"Parse JSON Response"},"config":{"canEnable":true,"unformatted_json":{"companies":"{{ step_8.output | remove: \"```json\" | remove: \"```\" | strip }}"}}},{"name":"step_16","type":"web_scrape","disabled":false,"annotations":{"friendly_name":"Scrape Company 1 Ads","note":""},"config":{"canEnable":true,"note":"","url":"https://www.linkedin.com/ad-library/search?accountOwner={{ step_15.output.companies.companies[0].linkedin_identifier }}&dateOption=last-30-days","output_type":"markdown","timeout":"30000","proxy_type":"datacenter","render_js":false,"remove_boilerplate":true,"soft_fail":true,"optimize_for":"speed","auto_scroll":false,"hard_fail":true}},{"name":"step_18","type":"web_scrape","disabled":false,"annotations":{"friendly_name":"Scrape Company 3 Ads","note":""},"config":{"canEnable":true,"note":"","url":"https://www.linkedin.com/ad-library/search?accountOwner={{ step_15.output.companies.companies[2].linkedin_identifier }}&dateOption=last-30-days","output_type":"markdown","timeout":"30000","proxy_type":"datacenter","render_js":false,"remove_boilerplate":true,"soft_fail":true,"optimize_for":"speed","auto_scroll":false}},{"name":"step_17","type":"web_scrape","disabled":false,"annotations":{"friendly_name":"Scrape Company 2 Ads","note":""},"config":{"canEnable":true,"note":"","url":"https://www.linkedin.com/ad-library/search?accountOwner={{ step_15.output.companies.companies[1].linkedin_identifier }}&dateOption=last-30-days","output_type":"markdown","timeout":"30000","proxy_type":"datacenter","render_js":false,"remove_boilerplate":true,"soft_fail":true,"optimize_for":"speed","auto_scroll":false}},{"name":"step_10","type":"web_scrape","disabled":false,"annotations":{"friendly_name":"Scrape LinkedIn Ads","note":""},"config":{"canEnable":true,"url":"https://www.linkedin.com/ad-library/search?accountOwner={{ company_name }}&dateOption=last-30-days","output_type":"markdown","timeout":"30000","proxy_type":"datacenter","render_js":false,"remove_boilerplate":true,"soft_fail":true,"optimize_for":"speed","auto_scroll":false,"hard_fail":true}},{"name":"step_19","type":"code","disabled":false,"annotations":{"friendly_name":"Combine Competitor Ads","note":""},"config":{"canEnable":true,"note":"","language":"python","function":"def combine_ads():\n    try:\n        # Safely get company identifiers from step_15\n        if not isinstance(step_15['output'], dict):\n            raise ValueError(\"Expected step_15 output to be a dictionary\")\n            \n        companies = step_15['output'].get('companies', {}).get('companies', [])\n        if not isinstance(companies, list):\n            raise ValueError(\"Expected companies to be a list\")\n        \n        # Create the combined structure\n        combined_data = {\n            \"competitor_ads\": {},\n            \"companies\": []\n        }\n        \n        # Add data for each company\n        for i, (company, ad_step) in enumerate(zip(companies, [step_16, step_17, step_18])):\n            if i >= len(companies):\n                break\n                \n            company_id = company.get('linkedin_identifier', '')\n            if not company_id:\n                continue\n                \n            ad_content = ad_step['output'] if isinstance(ad_step.get('output'), str) else ''\n            \n            combined_data['competitor_ads'][company_id] = ad_content\n            combined_data['companies'].append({\n                \"linkedin_identifier\": company_id,\n                \"ads\": ad_content\n            })\n        \n        return combined_data\n        \n    except Exception as e:\n        print(f\"Error processing data: {str(e)}\")\n        # Return a valid but empty structure if there's an error\n        return {\n            \"competitor_ads\": {},\n            \"companies\": []\n        }\n\nreturn combine_ads()","lambda_function":"","soft_fail":false}},{"name":"step_12","type":"llm","disabled":false,"annotations":{"friendly_name":"Ad Generation","note":""},"config":{"canEnable":true,"note":"","model":"claude-3-7-sonnet-20250219","soft_fail":false,"config":{"budget_tokens":8000,"formatting_re_enabled":false,"include_citations":false,"json_schema":{"schema":{"type":"object","properties":{"":{"type":"string"}},"required":[""],"additionalProperties":false},"strict":true,"name":"response"},"max_tokens":null,"models_source":"airops","reasoning_effort":"medium","request_consistent_results":false,"response_format":"","stream":false,"temperature":0.8,"thinking_enabled":false,"web_research":false,"messages":[{"role":"system","content":"","images":[""],"id":"system"},{"id":"a018febf-3aac-40d4-af8a-f64d6e058e5c","content":"Background & Context\n\t1.\tCompetitor Ads Analysis: {{ step_19.output }}\n\t2.\tPain Points Analysis: {{ step_11.output }}\n\t3.\tCompany’s Current Ads: {{ step_10.output }}\n\t4.\tBrand Kit: {{ brand_kit }}\n\t5.\tSales Transcripts: {{ sales_transcripts }}\n\t6.\tCompelling Pain Points: {{ step_11.output }}\n\t7.\tCompany Website Scrape: {{ step_2.output }}\n\t8.\tCompany Context: {{ step_5.output }}\n\t9.\tBrandfetch Company Info: {{ step_6.output }}\n\t10: Deep research: {{ step_20.output }}\n\nPerformance Goals & Metrics\n\t•\tCurrent CTR: {{ ctr_ }}% vs Baseline: {{ baseline_ctr }}%\n\t•  Baseline: ${{ baseline_cpc }}\n\t•\tCurrent Cost per Conversion: ${{ cost_per_conversion }} vs Baseline: ${{ baseline_cost_per_conversion }}\nObjective: {{ objective }}\n\nObjective\n\nCreate 10 distinct LinkedIn ad variations based on the objective, taking into account all of the above context. \n\nMake it so compelling and powerful that B2B professionals instantly want to engage. They should feel so inspired they’d nearly consider quitting their jobs just to bring your solution into their organizations. Each variation must integrate your company’s unique selling propositions (USPs), tackle the most urgent pain points, and reflect your brand voice as outlined in the knowledge-base references above.\n\nOn LinkedIn every word needs to carry its weight in gold, specifically the opening hook needs to draw curiosity so people want to 'read more'.\n\nPrioritize drawing insights from sales transcripts and deep research. And iterate heavily on previous ads because we're looking for 10x improvements, not 10%.\n\nRequirements for Each Ad Variation\n\t1.\tAd Copy\n\t•\tTailored to B2B decision-makers who are also human and appreciate great content (C-suite, directors, managers).\n\t•\tIncorporate crucial insights from the above context.\n\t•\tUse a tone that resonates with the personality found in the Brand Kit and the real-life sales calls.\n\t2.\tPrimary Pain Point\n\t•\tSpecifically name the #1 problem you’re solving.\n\t•\tShow how your solution neutralizes that pain, using any direct phrases or stats you have the context.\n\t3.\tImage Copy (Creative Overlay Text)\n\t•\tA short, bold phrase—2–10 words max that we can add to creative.\n\t•\tInstantly readable, high contrast with your brand’s color palette.\n\t•\tCould be a war cry, a success promise, or a shock statement or a stat from a case study we delivered that 'solves' their core problem.\n\nFormat\n\t•\tDeliver the 10 ad variations in markdown.\n\t•\tEach variation should be clearly labeled (Ad #1 through Ad #10).\n\t•\tPresent them in a readable format, each containing:\n\t•\tPrimary Pain Point\n\t•\tAd Copy\n\t•\tImage Copy\n\nAdditional Notes\n\t•\tIncorporate real data from the company if it helps strengthen credibility.\n\t•\tKeep each variation unique in angle, tone, or style to maximize A/B testing potential.\n\t•\tAim for boldness: your objective is to create job-quitting, adrenaline-pumping excitement around your solution.","images":[""],"role":"user"}],"canEnable":true}}},{"name":"step_13","type":"llm","disabled":true,"annotations":{"friendly_name":"Ad Classification"},"config":{"canEnable":true,"model":"gpt-4o","soft_fail":false,"config":{"canEnable":true,"stream":false,"temperature":0.3,"response_format":"json_object","messages":[{"role":"system","content":"You are an expert at analyzing and classifying B2B advertising content. Your task is to analyze each ad to determine its type and appropriate funnel stage based on the content and approach. Be meticulous in your analysis and ensure that each classification is well-justified."},{"id":0,"role":"user","content":"Classify each of the following ads by type and funnel stage. Consider the following ad types and funnel stages:\n\nAd Types:\n- Informative: Educational content that provides valuable information to the audience.\n- Funny: Humorous or entertaining content designed to engage the audience through amusement.\n- Pain Point Focus: Content that highlights specific challenges or problems faced by the target audience.\n- Social Proof: Content that includes customer testimonials or results to build trust and credibility.\n- FOMO: Content that creates a sense of urgency or exclusivity to encourage immediate action.\n- Product Feature Highlight: Content that showcases specific features or benefits of a product.\n- Thought Leadership: Content that positions the brand as an authority or leader in the industry.\n- Industry Insight: Content that provides analysis or commentary on industry trends or developments.\n- Case Study Based: Content that presents detailed examples of how a product or service has been successfully used.\n- Competitive Advantage: Content that emphasizes the unique benefits or advantages of a product over competitors.\n\nFunnel Stages:\n- Top of Funnel: Content aimed at raising awareness and attracting a broad audience.\n- Retargeting: Content aimed at re-engaging potential customers who have previously interacted with the brand.\n\nFor each ad, provide a detailed classification including the ad type, funnel stage, and a confidence score indicating your certainty in the classification. Use a scale from 0 to 1 for the confidence score, where 1 indicates complete certainty.\n\nFormat the output as JSON with the following structure:\n{\n  \"classified_ads\": [\n    {\n      \"ad_copy\": \"string\",\n      \"ad_type\": \"string\",\n      \"funnel_stage\": \"string\",\n      \"confidence_score\": \"number\"\n    }\n  ]\n}\n\nEnsure that your analysis is clear, concise, and follows the specified format. Use a professional and analytical tone throughout your response.\n\nAds to classify: {{ step_12.output }}"}]}}}],"input_groups":[{"id":"6248d8b2-8ecf-4d4a-82ef-1e74e6709684"},{"id":"f87296b3-7853-453c-87d0-970bb8bf2522"},{"id":"b9ec4c36-508a-46e7-a168-73b5c27a440b"},{"id":"06e9183e-d6f3-4dbc-afe9-c92c58ef33fe"},{"id":"f8474b0f-c567-426e-b787-9564086efae0"},{"id":"60febc39-da1c-406f-9830-09ee82eecc05"},{"id":"13e7f3a8-1a17-40a5-8723-be5b17e48a44"},{"id":"no-group"},{"id":"18ba3caf-7d11-4695-8fa0-37b3e2e254b7"},{"id":"61e46ee7-464e-4f38-9711-84539d4f246a"}],"inputs_schema":[{"interface":"long_text","label":"Previous Ad Input","name":"previous_ad_input","hint":"","required":false,"group_id":"6248d8b2-8ecf-4d4a-82ef-1e74e6709684","action_id":"","placeholder":"","default_instruction":"","test_value":"","options":[]},{"interface":"number","label":"Engagement %","name":"engagement__","hint":"","required":false,"group_id":"f87296b3-7853-453c-87d0-970bb8bf2522","action_id":"","placeholder":"","default_instruction":"","test_value":"","options":[]},{"interface":"number","label":"CTR %","name":"ctr_","hint":"","required":false,"group_id":"b9ec4c36-508a-46e7-a168-73b5c27a440b","action_id":"","placeholder":"","default_instruction":"","test_value":"","options":[]},{"interface":"number","label":"Cost Per Conversion","name":"cost_per_conversion","hint":"","required":false,"group_id":"06e9183e-d6f3-4dbc-afe9-c92c58ef33fe","action_id":"","placeholder":"","default_instruction":"","test_value":"","options":[]},{"interface":"brandkit","label":"Brand Kit","name":"brand_kit","hint":"","required":false,"group_id":"f8474b0f-c567-426e-b787-9564086efae0","action_id":"","placeholder":"","default_instruction":"","test_value":"","options":[]},{"interface":"short_text","label":"Company URL","name":"company_url","hint":"","required":false,"group_id":"13e7f3a8-1a17-40a5-8723-be5b17e48a44","action_id":"","placeholder":"","default_instruction":"","test_value":"","options":[]},{"interface":"long_text","label":"Sales Call Transcripts","name":"sales_transcripts","hint":"Upload your sales call transcripts in text format","required":false,"group_id":"no-group","action_id":"","placeholder":"","default_instruction":"","test_value":"","options":[]},{"interface":"number","label":"Industry Baseline CTR %","name":"baseline_ctr","hint":"Enter the industry average CTR percentage for comparison","required":true,"group_id":"no-group","placeholder":"2.5"},{"interface":"number","label":"Industry Baseline CPC","name":"baseline_cpc","hint":"Enter the industry average cost per click for comparison","required":true,"group_id":"no-group","placeholder":"1.2"},{"interface":"number","label":"Industry Baseline Cost per Conversion","name":"baseline_cost_per_conversion","hint":"Enter the industry average cost per conversion for comparison","required":true,"group_id":"no-group","placeholder":"50"},{"interface":"short_text","label":"Company name","name":"company_name","hint":"","required":false,"group_id":"18ba3caf-7d11-4695-8fa0-37b3e2e254b7","action_id":"","placeholder":"airops","default_instruction":"","test_value":"","options":[]},{"interface":"short_text","label":"Objective","name":"objective","hint":"","required":false,"group_id":"61e46ee7-464e-4f38-9711-84539d4f246a","action_id":"","placeholder":"","default_instruction":"","test_value":"","options":[]}],"output_type":null,"next_step_number":21}